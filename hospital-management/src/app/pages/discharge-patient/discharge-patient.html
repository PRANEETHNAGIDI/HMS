<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">

      <div *ngIf="formError" class="alert alert-warning" role="alert">
        Please fill out all fields correctly before submitting.
      </div>

      <div class="card shadow-lg border-0">
        <div class="card-body p-4 position-relative">
          <span class="position-absolute top-0 end-0 p-3 cursor-pointer" (click)="onCancel()">
            <i class="bi bi-x-circle-fill text-danger" style="font-size: 1.5rem;"></i>
          </span>

          <h2 class="h4 mb-4 text-danger fw-bold">
            <i class="bi bi-box-arrow-right me-2"></i> Discharge Patient
          </h2>

 <form [formGroup]="dischargeForm" (ngSubmit)="onSubmit()">
  <div class="mb-3">
    <label for="patientName" class="form-label">
      Patient Name <span class="text-danger">*</span>
    </label>
    <input
      type="text"
      id="patientName"
      class="form-control"
      formControlName="patientName"
      placeholder="Enter patient name"
    />
    <div *ngIf="dischargeForm.get('patientName')?.touched && dischargeForm.get('patientName')?.invalid" class="text-danger mt-1">
      Patient name is required.
    </div>
  </div>

  <div class="mb-3">
    <label for="patientId" class="form-label">
      Patient ID <span class="text-danger">*</span>
    </label>
    <input
      type="number"
      id="patientId"
      class="form-control"
      formControlName="patientId"
      placeholder="Enter patient ID"
    />
    <div *ngIf="dischargeForm.get('patientId')?.touched && dischargeForm.get('patientId')?.invalid" class="text-danger mt-1">
      Patient ID is required.
    </div>
  </div>

  <div class="mb-3">
    <label for="finalBillId" class="form-label">
      Final Bill ID <span class="text-danger">*</span>
    </label>
    <input
      type="number"
      id="finalBillId"
      class="form-control"
      formControlName="finalBillId"
      placeholder="Enter final bill ID"
    />
    <div *ngIf="dischargeForm.get('finalBillId')?.touched && dischargeForm.get('finalBillId')?.invalid" class="text-danger mt-1">
      Final Bill ID is required.
    </div>
  </div>

  <div class="mb-3">
    <label for="dischargeDate" class="form-label">
      Discharge Date <span class="text-danger">*</span>
    </label>
    <input
      type="date"
      id="dischargeDate"
      class="form-control"
      formControlName="dischargeDate"
    />
    <div *ngIf="dischargeForm.get('dischargeDate')?.touched && dischargeForm.get('dischargeDate')?.invalid" class="text-danger mt-1">
      Discharge date is required.
    </div>
  </div>

  <div class="d-flex gap-2 mt-4">
    <button type="submit" class="btn btn-danger btn-lg">
      <i class="bi bi-check-circle me-1"></i> Discharge
    </button>
    <button type="reset" class="btn btn-warning btn-lg">Clear</button>
    <button type="button" class="btn btn-dark btn-lg" (click)="onCancel()">Cancel</button>
  </div>
</form>

          <!-- Discharge Summary -->
          <div *ngIf="dischargeSummary" class="mt-5">
            <div class="text-center mb-4">
              <h3 class="fw-bold text-danger">{{ dischargeSummary.name }}</h3>
              <h5 class="text-muted">Patient ID: {{ dischargeSummary.patientId }}</h5>
            </div>

            <div class="alert alert-secondary">
              <strong>Discharge Date:</strong> {{ dischargeSummary.dischargeDate }}<br />
              <strong>Final Bill ID:</strong> {{ dischargeSummary.finalBillId }}<br />
              <strong>Room:</strong> Room 203, General Ward<br />
              <strong>Stay Duration:</strong> 5 Days
            </div>

            <div class="card shadow-sm">
              <div class="card-header bg-dark text-white">
                <h5 class="mb-0">Billing Summary</h5>
              </div>
              <div class="card-body">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex justify-content-between">
                    <span><i class="bi bi-hospital me-2"></i>Room Charges</span>
                    <strong>₹5,000</strong>
                  </li>
                  <li class="list-group-item d-flex justify-content-between">
                    <span><i class="bi bi-capsule me-2"></i>Medicine Charges</span>
                    <strong>₹3,000</strong>
                  </li>
                  <li class="list-group-item d-flex justify-content-between">
                    <span><i class="bi bi-clipboard2-pulse me-2"></i>Lab Tests</span>
                    <strong>₹2,500</strong>
                  </li>
                  <li class="list-group-item d-flex justify-content-between">
                    <span><i class="bi bi-person-badge me-2"></i>Doctor Consultation</span>
                    <strong>₹2,000</strong>
                  </li>
                  <li class="list-group-item d-flex justify-content-between bg-light">
                    <span class="fw-bold">Total</span>
                    <strong class="text-success">₹12,500</strong>
                  </li>
                </ul>
              </div>
            </div>

            <div class="text-center mt-4">
              <button class="btn btn-secondary btn-lg" (click)="onPrint()">
                <i class="bi bi-printer me-1"></i> Print Summary
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
