
<app-nav></app-nav>
<div class="container py-5">
 
  <div class="row g-4 justify-content-center">
<!-- Assign Patient Form -->
<div class="col-md-6">
  <!-- <div *ngIf="formError" class="alert alert-warning" role="alert">
Please fill out all fields correctly before submitting.</div>          -->
      <div class="card shadow-lg border-0 h-100">

        <div class="card-body p-4 position-relative">
          <span class="position-absolute top-0 end-0 p-3 cursor-pointer" (click)="onCancel()">
            <i class="bi bi-x-circle-fill text-danger" style="font-size: 1.5rem;"></i>
          </span>
          <h2 class="h4 mb-4 text-success fw-bold">
            <i class="bi bi-person-check me-2"></i> Assign Patient to Room
          </h2>

          <form [formGroup]="assignmentForm" (ngSubmit)="onSubmitAssignment()">
           <!-- Patient ID -->
<div class="mb-3">
  <label for="patientId" class="form-label">Patient ID <span class="text-danger">*</span></label>
  <input type="number" id="patientId" class="form-control" formControlName="patientId" placeholder="Enter patient ID" />
  <div *ngIf="assignmentForm.get('patientId')?.touched && assignmentForm.get('patientId')?.invalid" class="text-danger mt-1">
    Patient ID is required.
  </div>
</div>

<!-- Room Type -->
<div class="mb-3">
  <label for="roomType" class="form-label">Room Type <span class="text-danger">*</span></label>
  <select id="roomType" class="form-select" formControlName="roomType">
    <option selected disabled>Select room type</option>
    <option>A.C Room</option>
    <option>Special Room</option>
    <option>Super Deluxe Room</option>
    <option>I.C.U</option>
  </select>
  <div *ngIf="assignmentForm.get('roomType')?.touched && assignmentForm.get('roomType')?.invalid" class="text-danger mt-1">
    Room type is required.
  </div>
</div>

<!-- Room Number -->
<div class="mb-3">
  <label for="roomId" class="form-label">Room Number <span class="text-danger">*</span></label>
  <select id="roomId" class="form-select" formControlName="roomId">
    <option selected disabled value="">Select room number</option>
    <option *ngFor="let room of filteredRooms" [value]="room.id">{{ room.id }}</option>
  </select>
  <div *ngIf="assignmentForm.get('roomId')?.touched && assignmentForm.get('roomId')?.invalid" class="text-danger mt-1">
    Room number is required.
  </div>
</div>

<!-- Assigned Date -->
<div class="mb-3">
  <label for="assignedDate" class="form-label">Assigned Date <span class="text-danger">*</span></label>
  <input type="date" id="assignedDate" class="form-control" formControlName="assignedDate" />
  <div *ngIf="assignmentForm.get('assignedDate')?.touched && assignmentForm.get('assignedDate')?.invalid" class="text-danger mt-1">
    Assigned date is required.
  </div>
</div>
            <div class="d-flex gap-2 mt-4">
              <button type="submit" class="btn btn-success btn-lg">
                <i class="bi bi-check-circle me-1"></i> Assign Room
              </button>
              <button type="reset" class="btn btn-warning btn-lg">Clear</button>
              <button type="reset" class="btn btn-danger btn-lg" (click)="onCancel()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- Add Room Form -->
    <div class="col-md-6">
      <div class="card shadow-lg border-0 h-100">
        <div class="card-body p-4 position-relative">
          <span class="position-absolute top-0 end-0 p-3 cursor-pointer" (click)="onCancel()">
            <i class="bi bi-x-circle-fill text-danger" style="font-size: 1.5rem;"></i>
          </span>
          <h2 class="h4 mb-4 text-info fw-bold">
            <i class="bi bi-door-open me-2"></i> Add Room
          </h2>

          <form [formGroup]="roomForm" (ngSubmit)="onSubmitRoom()" #roomsForm="ngForm">
            <!-- Room Type -->
<div class="mb-3">
  <label for="roomType" class="form-label">Room Type <span class="text-danger">*</span></label>
  <select id="roomType" class="form-select" formControlName="roomType">
    <option selected disabled>Select room type</option>
    <option>A.C Room</option>
    <option>Special Room</option>
    <option>Super Deluxe Room</option>
    <option>I.C.U</option>
  </select>
  <div *ngIf="roomForm.get('roomType')?.touched && roomForm.get('roomType')?.invalid" class="text-danger mt-1">
    Room type is required.
  </div>
</div>

<!-- Room Rate -->
<div class="mb-3">
  <label for="roomRate" class="form-label">Room Rate (â‚¹) <span class="text-danger">*</span></label>
  <input type="number" id="roomRate" class="form-control" formControlName="roomRate" placeholder="Enter room rate" />
  <div *ngIf="roomForm.get('roomRate')?.touched && roomForm.get('roomRate')?.invalid" class="text-danger mt-1">
    <div *ngIf="roomForm.get('roomRate')?.errors?.['required']">Room rate is required.</div>
    <div *ngIf="roomForm.get('roomRate')?.errors?.['min']">Room rate must be 0 or more.</div>
  </div>
</div>
            <div class="d-flex gap-2 mt-4">
              <button type="submit" class="btn btn-info btn-lg">
                <i class="bi bi-save me-1"></i> Add Room
              </button>
              <button type="reset" class="btn btn-danger btn-lg" (click)="onCancel()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>



  </div>
</div>
